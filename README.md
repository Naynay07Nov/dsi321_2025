#  ระบบวิเคราะห์ข้อมูลสภาพอากาศแบบเรียลไทม์ สำหรับสมาคมศิษย์เก่าสาธิตรามคำแหง (Real-time Weather Data Monitoring System for Satitram Alumni Area)  
__วิชา DSI321: Big Data Infrastructure__  
__โครงสร้างพื้นฐานคอมพิวเตอร์สำหรับการประมวลผลข้อมูลขนาดใหญ่__

## 1. Introduction
โครงการนี้มีเป้าหมายเพื่อสร้างระบบสำหรับเก็บและนำเสนอข้อมูลสภาพอากาศแบบเรียลไทม์ ครอบคลุมพื้นที่รอบสมาคมศิษย์เก่าสาธิตรามคำแหง และบริเวณใกล้เคียงรวมทั้งหมด 15 จุด โดยจะดึงข้อมูลจาก OpenWeatherMap API ในทุกๆ 15 นาที จากนั้นจัดเก็บข้อมูลด้วยระบบ version control ผ่าน LakeFS

ข้อมูลจะถูกแสดงผลในรูปแบบ dashboard บน Streamlit ซึ่งผู้ใช้สามารถดูข้อมูลอุณหภูมิ ความชื้น ความเร็วลม และปริมาณฝนแบบ real-time ทุก 15 นาที ได้ทันที นอกจากนี้ โครงการยังประยุกต์ใช้ Machine Learning (K-Means Clustering) เพื่อจำแนกและวิเคราะห์รูปแบบของสภาพอากาศในแต่ละช่วงเวลา ช่วยให้การวางแผนการเดินทางหรือการจัดกิจกรรมบริเวณพื้นที่ได้อย่างเหมาะสม

## 2. วัตถุประสงค์ของโครงการ
วัตถุประสงค์หลักของโครงการ Real-time Weather Data Monitoring System
คือการพัฒนาระบบ Data Pipeline ที่สามารถดึงข้อมูลสภาพอากาศแบบเรียลไทม์จาก OpenWeatherMap API ทุก 15 นาที สำหรับพื้นที่รอบสมาคมศิษย์เก่าสาธิตรามคำแหงและพื้นที่ใกล้เคียง รวมทั้งหมด 15 จุด พร้อมทั้งจัดเก็บข้อมูลอย่างเป็นระบบด้วย LakeFS และแสดงผลผ่าน Dashboard ที่ใช้งานง่าย เพื่อเป็นตัวอย่างของการออกแบบและพัฒนาระบบ Data Engineering ที่ทันสมัย โดยมีวัตถุประสงค์เฉพาะดังนี้:

__2.1 พัฒนา Data Pipeline สำหรับเก็บข้อมูลสภาพอากาศแบบ Real-Time__ เพื่อกระบวนการเก็บข้อมูลสภาพอากาศจาก API จาก OpenWeatherMap API ทั้งหมด 15 สถานที่ในบริเวณสมาคมศิษย์เก่าสาธิตรามคำแหงและพื้นที่ใกล้เคียง

__2.2 ใช้ Prefect ในการควบคุม Workflow การทำงานแบบอัตโนมัติ__ เพื่อกำหนดการทำงานของการดึงข้อมูล, การประมวลผล, และการจัดเก็บ ให้ทำงานซ้ำได้อย่างต่อเนื่อง ทุก ๆ 15 นาที

__2.3 จัดเก็บข้อมูลในรูปแบบ Version Control บน LakeFS__ เพื่อให้สามารถติดตามการเปลี่ยนแปลงของข้อมูลแต่ละเวอร์ชัน, ทำการทดลอง (branch), และ rollback ได้เมื่อต้องการ

__2.4 นำเสนอข้อมูลผ่าน Dashboard บน Streamlit__ ให้ผู้ใช้งานสามารถดูข้อมูลได้แบบ Interactive เพื่อให้ผู้ใช้งานสามารถเลือกดูข้อมูลย้อนหลัง, ข้อมูลเรียลไทม์, และดูวิเคราะห์แนวโน้มของอุณหภูมิ, ความชื้น, ปริมาณฝน ได้อย่างเข้าใจง่าย

__2.5 ประยุกต์ใช้ Machine Learning (K-Means Clustering)__ เพื่อจำแนกลักษณะของสภาพอากาศออกเป็นประเภทของสภาพอากาศในแต่ละช่วงเวลา

## 4. ตัวชี้วัดความสำเร็จของโครงงาน (Key Performance Indicators)
เพื่อประเมินความสำเร็จตลอดระยะเวลาของโครงงานนี้ เราได้กำหนดตัวชี้วัดความสำเร็จ (KPIs) แบ่งออกเป็น 3 ด้านหลัก ได้แก่ ด้านเทคนิค ด้านการศึกษา และด้านการใช้งานจริง ดังนี้ : 

__4.1 ตัวชี้วัดด้านเทคนิค (Technical KPIs)__
- **ความน่าเชื่อถือของ Pipeline**
  - เป้าหมาย: ระบบ Pipeline ต้องทำงานได้อย่างต่อเนื่องและเชื่อถือได้ โดยต้องสามารถดึงข้อมูลจาก OpenWeatherMap API ได้ครบถ้วนตามเวลาที่กำหนด (ทุก 15 นาที)
  - วิธีวัดผล: ตรวจสอบ Prefect UI logs สำหรับสถานะการรัน (สำเร็จ ล้มเหลว รอทำใหม่) 
- **ปริมาณข้อมูล**
  - เป้าหมาย: Pipeline เก็บข้อมูลสภาพอากาศ ~1,000 record ในรูปแบบ Parquet
  - วิธีวัดผล: ตรวจสอบจำนวน Records ที่เก็บได้ในฐานข้อมูล LakeFS
- **การทำงานของ Dashboard**
  - เป้าหมาย: Dashboard ที่สร้างด้วย Streamlit ต้องสามารถโหลดข้อมูลและอัปเดตข้อมูลทุก 15 นาที โดย ~90% ของการโหลดข้อมูลใช้เวลาไม่เกิน 5 วินาที
  - วิธีวัดผล: ทดสอบการโหลดข้อมูลและการตอบสนองของ Dashboard โดยต้องไม่เกิน 5 วินาทีต่อการโหลดครั้งหนึ่ง 
- **เสถียรภาพของการ Deploy**
  - เป้าหมาย: Docker containers (Jupyter, Prefect, Streamlit) ทำงานต่อเนื่อง 24 ชั่วโมงขึ้นไปโดยไม่มี downtime
  - วิธีวัดผล: ตรวจสอบ log และสถานะ container

**4.2 ตัวชี้วัดด้านการศึกษา (Educational KPIs)**
- **คุณภาพเอกสาร**
เป้าหมาย: เอกสารประกอบโครงการ README บน GitHub และรายงานสรุปโครงการมีความชัดเจน ครอบคลุมการติดตั้ง การใช้งาน และผลลัพธ์ 
วิธีวัดผล: ตรวจสอบเอกสารตาม Checklist (มีเนื้อหาครบถ้วน, อ่านเข้าใจง่าย, มีรูปภาพ/Diagram ประกอบ) และรวบรวม feedback จากผู้ใช้ 3–5 คน

- **ผลลัพธ์การเรียนรู้**
เป้าหมาย: ความเข้าใจเทคโนโลยีหลักที่ใช้ ได้แก่ Docker, Prefect, LakeFS, และ Streamlit และสามารถอธิบายหลักการทำงานได้ และสามารถติดตั้งและรัน pipeline ได้สำเร็จ ≥80% 
วิธีวัดผล: ติดตั้งและรัน pipeline ได้สำเร็จ

- **การมีส่วนร่วมของชุมชน**
เป้าหมาย: เป้าหมาย: ได้ 10+ ดาวบน GitHub หรือ 50+ views ภายใน 31 พฤษภาคม 2025
วิธีวัดผล: ตรวจสอบสถิติบน GitHub

**4.3 ตัวชี้วัดด้านการใช้งานจริง (Practical KPIs)**
- **การแสดงผลของ Visualization**
เป้าหมาย: Dashboard ต้องสามารถแสดงผลข้อมูลได้อย่างถูกต้อง ครบถ้วน และสามารถ  interactive ได้ 
วิธีวัดผล: ตรวจสอบฟีเจอร์ของ Dashboard

- **ประสิทธิภาพของ ML Model**
เป้าหมาย: การทำ K-Means Clustering ต้องสามารถจัดกลุ่มข้อมูลสภาพอากาศได้อย่างเหมาะสม และมีคุณภาพที่สามารถตีความได้
วิธีวัดผล: สามารถแสดงผลใน dashboard ได้อย่างถูกต้อง

## 5. แผนงานโครงการ (Project Plan Overview)
ระยะเวลา: 3 สัปดาห์ (ประมาณ 10–15 ชั่วโมงต่อสัปดาห์) แผนงานรายสัปดาห์ (Timeline)

**สัปดาห์ที่ 1 (28 เมษายน – 4 พฤษภาคม)**

ออกแบบ Infrastructure, Data Architecture, สร้าง GitHub, ตั้งค่า Docker

**สัปดาห์ที่ 2 (5 พฤษภาคม – 11 พฤษภาคม)**

ช่วงนี้จะเป็นการพัฒนาระบบหลัก โดยเริ่มจากการสร้าง Prefect flows ที่ควบคุมกระบวนการดึงข้อมูลจาก OpenWeatherMap API แปลงข้อมูลให้อยู่ในรูปแบบที่เหมาะสม และจัดเก็บข้อมูลลงใน LakeFS รวมทั้งการพัฒนา Dashboard ด้วย Streamlit สำหรับแสดงข้อมูลสภาพอากาศทั้งแบบ real-time และย้อนหลัง โดยจะมีการเชื่อมต่อ ไฟล์ Parquet รวมถึงการบันทึก commit ลงใน GitHub เพื่อแสดงความก้าวหน้าของโค้ด


**สัปดาห์ที่ 3 (12 พฤษภาคม – 18 พฤษภาคม)**

ในสัปดาห์สุดท้ายนี้จะเน้นการ Deploy ระบบ Pipeline ให้สามารถทำงานอัตโนมัติแบบ 24 ชั่วโมงขึ้นไป พร้อมกับทดสอบประสิทธิภาพและเสถียรภาพของระบบ นอกจากนี้จะมีการปรับปรุงและเพิ่มฟีเจอร์ใน Dashboard  และจัดทำรายงานสรุปผลการดำเนินงานทั้งหมด รวมถึงการวิเคราะห์ข้อมูลและผลลัพธ์ที่ได้จาก Machine Learning ที่นำมาใช้จำแนกสภาพอากาศ

## เทคโนโลยีที่ใช้ในโครงการ
**1. Docker** : ใช้สำหรับสร้าง Environment ที่มีความเสถียรและทำงานซ้ำได้ (Reproducible) และสามารถนทุก component ใน environment เดียวได้

**2. Prefect** : ใช้ในการจัดการ Workflow ของ Data Pipeline ทำหน้าที่เรียกใช้งาน Flow ในการเก็บข้อมูลจาก API ทุก 15 นาที โดยอัตโนมัติ มีระบบติดตามสถานะการทำงาน, จัดการ Retry เมื่อเกิดปัญหา

**3. LakeFS** : ใช้สำหรับจัดเก็บข้อมูลแบบ Version Control บน Object Storage รองรับการทำ Branch, Merge, และ Rollback ของข้อมูลได้อย่างถูกต้อง

**4. Python** : ภาษาโปรแกรมหลักที่ใช้พัฒนาโปรเจกต์ ใช้สำหรับเขียน Script ดึงข้อมูลจาก OpenWeatherMap API, จัดการข้อมูล, และเชื่อมต่อกับ Prefect และ LakeFS

**5. Streamlit** : ใช้สำหรับสร้าง Dashboard แบบ Interactive เพื่อแสดงผลข้อมูลสภาพอากาศทั้งแบบ Real-Time และ Historical Data รองรับการแสดงผลกราฟ, ตาราง, และตัวเลือกการดูข้อมูลตามสถานที่และช่วงเวลา

**6. OpenWeatherMap API** : แหล่งข้อมูลหลักสำหรับการเก็บข้อมูลสภาพอากาศจาก 15 พื้นที่ที่กำหนด

**7. Parquet** : รูปแบบไฟล์ที่ใช้จัดเก็บข้อมูลสภาพอากาศในรูปแบบ Columnar Format ช่วยให้การจัดเก็บข้อมูลมีประสิทธิภาพสูงและเหมาะสำหรับการทำงานวิเคราะห์ขนาดใหญ่

**8. K-Means Clustering Algorithm** : ใช้สำหรับจำแนกลักษณะสภาพอากาศออกเป็นกลุ่ม (Clusters) และช่วยแนะนำการเตรียมตัวต่อสภาพอากาศบริเวณนั้นๆ

## Data Schema

| คอลัมน์            | คำอธิบาย                                        |
|---------------------|--------------------------------------------------|
| timestamp           | เวลาเก็บข้อมูล                                  |
| created_at          | เวลาสร้าง record                                |
| minute              | นาทีในแต่ละชั่วโมง                              |
| province            | จังหวัดที่ตั้งของสถานที่เก็บข้อมูล               |
| location_name       | ชื่อสถานที่ เช่น Satitram Alumni                |
| api_location        | เขตหรือย่านที่ส่งไปใน API เช่น Bang Kapi        |
| weather_main        | ประเภทสภาพอากาศ เช่น Rain, Clear                |
| weather_description | รายละเอียดสภาพอากาศ เช่น light rain             |
| main.temp           | อุณหภูมิ (°C)                                    |
| main.humidity       | ความชื้น (%)                                     |
| wind.speed          | ความเร็วลม (m/s)                                 |
| precipitation       | ปริมาณฝน (mm)                                   |
| day, hour, month, year | รายละเอียดของวันที่และเวลา                       |

